#### 1. 单例模式

这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。

- 非线程安全懒汉模式

  ```java
  public class SingletonDemo() {
      private static SingletonDemo instance;
      private SingletonDemo(){
          
      }
      public static SingletonDemo getInstance() {
          if (instance == null) {
              instance = new SingletonDemo();
          }
          return instance;
      }
  }
  ```

- 线程安全懒汉模式

  ```java
  public class SingletonDemo() {
      private static SingletonDemo instance;
      private SingletonDemo() {
          
      }
      public static synchronized SingletonDemo getInstance() {
          if (instance == null) {
              instance = new SingletonDemo();
          }
          return instance;
      }
  }
  ```

- 线程安全饿汉模式

  直接在运行这个类的时候进行一次 loading，之后直接访问。显然，这种方法没有起到lazy loading 的效果，考虑到前面提到的和静态类的对比，这种方法只比静态类多了一个内存常驻而已。

  ```java
  public static SingletonDemo() {
      private static SingletonDemo instance = new SingletonDemo();
      private SingletonDemo() {
          
      }
      public static SingletonDemo getInstance() {
          return instance
      }
  }
  ```

- 静态类内部加载(线程安全)

  ```java
  public class SingletonDemo() {
      private static class SingletonHolder() {
          private static SingletonDemo instance = new SingletonDemo();
      }
      private SingletonDemo() {
          
      }
      public static SingletonDemo getInstance() {
          return SingletonHolder.instance;
      }
  }
  ```

- 双重校验锁法(线程安全，低概率不安全)

  ```java
  public class SingletonDemo() {
      private static SingletonDemo instance;
      private SingletonDemo() {
          
      }
      public static SingletonDemo getInstance() {
          if (instance == null) {
              synchronized (SingletonDemo.class) {
                  if(instance == null) {
                      instance = new SingletonDemo();
                  }
              }
          }
          return instance;
      }
  }
  ```

- 解决双重校验锁法的低概率不安全

  ```java
  public class SingletonDemo {
      private volatile static SingletonDemo instance = null;
      private SingletonDemo() {
          
      }
      public static SingletonDemo getInstance() {
          if (instance == null) {
              synchronized (SingletonDemo.class) {
                  if(instance == null) {
                      instance = new SingletonDemo();
                  }
              }
          }
          return instance;
      }
  }
  ```

  