(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AdminFilm"],{"28ef":function(t,e,a){},8470:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"mt-3",attrs:{fluid:""}},[a("div",{staticClass:"sidebar pr-3"},[a("b-list-group",[a("b-list-group-item",{attrs:{variant:0==t.active?"success":""},on:{click:function(e){t.active=0}}},[t._v("影片列表")]),a("b-list-group-item",{attrs:{variant:1==t.active?"success":""},on:{click:function(e){t.active=1}}},[t._v("新增影片")])],1)],1),a("b-card",{staticClass:"main",attrs:{"no-body":""}},[a("b-tabs",{staticClass:"tab",attrs:{card:"",fixed:"","nav-wrapper-class":"d-none"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("b-tab",[a("tabu-table")],1),a("b-tab",[a("add-film")],1)],1)],1)],1)},l=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"p-0",attrs:{fluid:""}},[a("div",{staticClass:"topbar mb-3"},[a("b-row",[a("b-col",{attrs:{cols:"auto"}},[a("fade-transition",{attrs:{duration:200}},[t.selected.length?t._e():a("b-input-group",{attrs:{prepend:"数据搜索"}},[a("b-form-select",{attrs:{options:t.options.search},model:{value:t.searchFeild,callback:function(e){t.searchFeild=e},expression:"searchFeild"}}),a("b-form-input",{attrs:{placeholder:"输入搜索内容"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1)],1),a("b-col"),a("fade-transition",{attrs:{duration:200}},[t.selected.length?a("b-col",{attrs:{cols:"auto"}},[a("b-btn",{staticClass:"mr-1",attrs:{text:"Button",variant:"danger"},on:{click:t.handleDelete}},[t._v("删除选中 ("+t._s(t.selected.length)+")")]),a("b-btn",{attrs:{text:"Button",variant:"outline-secondary"},on:{click:t.handleDeselectAll}},[t._v("取消")])],1):t._e()],1)],1)],1),a("div",{ref:"table",staticClass:"table mb-0"})])},s=[],n=(a("96cf"),a("1da1")),o=a("be94"),c=a("2f62"),u=a("39ab"),b=a.n(u),d=(a("7ab1"),{mounted:function(){var t=this;this.fetch(),this.tabulator=new b.a(this.$refs.table,{data:this.tableData,columns:[{title:"ID",field:"id",width:80,responsive:0,headerSort:!1},{title:"影片名",field:"title",width:200,responsive:0,headerSort:!1},{title:"副标题",field:"subtitle",width:200,headerSort:!1},{title:"观看地址",field:"href",headerSort:!1}],height:"calc(100vh - 190px)",layout:"fitColumns",responsiveLayout:"hide",selectable:!0,placeholder:"无数据",rowSelectionChanged:function(e){t.selected=e}})},data:function(){return{selected:[],options:{search:[{value:"title",text:"影片名"},{value:"subtitle",text:"副标题"}]},searchFeild:"title",searchValue:"",tabulator:null}},computed:Object(o["a"])({},Object(c["c"])("admin/film",{tableData:"list"}),{search:function(){return this.searchValue.trim().length?{searchFeild:this.searchFeild,searchValue:this.searchValue}:{}}}),watch:{tableData:{handler:function(t){this.tabulator.replaceData(t)},deep:!0},search:function(t){this.fetchFilm(t)}},methods:Object(o["a"])({},Object(c["b"])("admin/film",["fetch","fetchFilm","deleteFilm"]),{handleDeselectAll:function(){this.tabulator.deselectRow()},handleDelete:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.deleteFilm(this.selected.map(function(t){return t.id}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),alert(t.t0.msg||"删除失败");case 8:case"end":return t.stop()}},t,this,[[0,5]])}));return function(){return t.apply(this,arguments)}}()})}),h=d,f=a("2877"),m=Object(f["a"])(h,i,s,!1,null,null,null);m.options.__file="TabuTable.vue";var p=m.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("b-row",[a("b-col",{attrs:{cols:"auto"}},[t.form.cover.trim().length?a("b-card",{staticStyle:{width:"14rem"},attrs:{"no-body":"",header:"封面预览","img-src":"./cover/"+t.form.cover,"img-bottom":""}}):a("b-card",{staticStyle:{width:"14rem"},attrs:{header:"封面预览","img-bottom":""}},[a("span",{staticClass:"text-muted"},[t._v("请先输入封面地址")])])],1),a("b-col",[a("b-form",{staticClass:"ml-5",on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{label:"影片名:",horizontal:"","label-cols":"2"}},[a("b-form-input",{attrs:{required:"",maxlength:"512",placeholder:"请输入影片名"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("b-form-group",{attrs:{label:"副标题:",horizontal:"","label-cols":"2"}},[a("b-form-input",{attrs:{required:"",maxlength:"512",placeholder:"请输入副标题"},model:{value:t.form.subtitle,callback:function(e){t.$set(t.form,"subtitle",e)},expression:"form.subtitle"}})],1),a("b-form-group",{attrs:{label:"观看地址:",horizontal:"","label-cols":"2"}},[a("b-form-input",{attrs:{required:"",maxlength:"1024",placeholder:"http 链接地址"},model:{value:t.form.href,callback:function(e){t.$set(t.form,"href",e)},expression:"form.href"}})],1),a("b-form-group",{attrs:{label:"封面地址:",horizontal:"","label-cols":"2"}},[a("b-form-input",{attrs:{required:"",maxlength:"1024",placeholder:"http 链接地址"},model:{value:t.form.cover,callback:function(e){t.$set(t.form,"cover",e)},expression:"form.cover"}})],1),a("b-row",[a("b-col",{attrs:{align:"center"}},[a("b-button",{staticClass:"mr-3 pl-5 pr-5",attrs:{type:"submit",variant:"success"}},[t._v("确认提交")])],1)],1)],1)],1)],1)],1)},g=[],w={data:function(){if(this.$env__is_preview){var t=+new Date;return{form:{title:"麻瓜大电影"+t,subtitle:"即将上映",href:"https://www.bilibili.com/bangumi/play/ep253908",cover:"7d9b4804226444f90913a9113a0f56f53056500d.jpg@320w_428h.jpg"}}}return{form:{title:"",subtitle:"",href:"",cover:""}}},computed:{validated:function(){var t=this.form,e=t.title,a=t.subtitle,r=t.href,l=t.cover;return[e,a,r,l].every(function(t){return t&&t.length&&t.trim().length})}},methods:Object(o["a"])({},Object(c["b"])("admin/film",["addFilm"]),{resetForm:function(){this.form={title:"",subtitle:"",href:"",cover:""}},onSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,this.addFilm(this.form);case 4:a=t.sent,alert(a.msg||"添加成功"),this.resetForm(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),alert(t.t0.msg||"添加失败");case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()})},x=w,_=Object(f["a"])(x,v,g,!1,null,null,null);_.options.__file="AddFilm.vue";var k=_.exports,F={data:function(){return{active:0}},components:{TabuTable:p,AddFilm:k}},C=F,j=(a("e653"),Object(f["a"])(C,r,l,!1,null,"8b597630",null));j.options.__file="index.vue";e["default"]=j.exports},e653:function(t,e,a){"use strict";var r=a("28ef"),l=a.n(r);l.a}}]);